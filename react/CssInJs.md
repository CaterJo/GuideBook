# Css-in-Js


## intro
- CSS-in-JS는 자바스크립트 파일 안에 css를 작성하는 형태이다.
- CSS-in-JS는 CSS 모델을 문서 수준이 아닌 구성 요소 수준으로 추상화하는 스타일링 방식입니다. 
- component스타일링을 위한 접근방식
- 스타일을 컴포넌트 단위로 모듈화한다.


## 장점

1. 컴포넌트로 생각하기
    -  더이상 스타일시트의 묶음을 유지보수 할 필요가 없습니다. CSS-in-JS는 CSS 모델을 문서 레벨이 아니라 컴포넌트 레벨로 추상화합니다(모듈성).
2. CSS-in-JS는 JavaScript 환경을 최대한 활용하여 CSS를 향상시킵니다.
3. "진정한 분리 법칙"
    - 스코프가 있는 선택자로는 충분하지 않습니다. CSS에는 명시적으로 정의 하지 않은 경우, 부모 요소에서 자동으로 상속되는 속성이 있습니다. jss-isolate 플러그인 덕분에 JSS 규칙은 부모 요소의 속성을 상속하지 않습니다.
    - 선택적 상속가능.
4. 스코프가 있는 선택자
    - CSS는 하나의 전역 네임스페이스만 있습니다. 복잡한 애플리케이션 내에서 선택자 충돌을 피할 수 없습니다. BEM과 같은 네이밍 컨벤션은 한 프로젝트 내에서는 도움이 되지만, 서드파티 코드를 통합할 때는 도움이 되지 않습니다. JSS는 JSON으로 표현된 것을 CSS로 컴파일 할 때, 기본적으로 고유한 이름을 생성합니다(해쉬값).
5. 벤더 프리픽스
    - 생성된 CSS 규칙은 자동적으로 벤더 프리픽스가 붙어있으므로 생각할 필요가 없습니다.
6. 코드 공유
    - JavaScript와 CSS사이에 상수와 함수를 쉽게 공유할 수 있습니다.
7. 현재 화면에 사용중인 스타일만 DOM에 있습니다(react-jss).
8. CSS 유닛 테스트!

9. HTTP 요청 수 감소
    -  CSS-in-JS는 자산과 리소스를로드하기 위해 HTTP 요청을하지 않아도됨을 의미합니다.
10. 스타일링 조각화 
    -  CSS-in-JS를 사용하면 호환성 문제에 대한 걱정없이 자유롭게 스타일을 작성할 수 있습니다.
11. 미사용 스타일을 쉽게 추적가능.
    - 기존 익스터널방식에서는 미사용 class를 추적하기 어렵다.


## Styled Component


## 기존 css의 문제점


### 1. CSS 클래스 중복 문제
- 네임스페이스를 공유하기때문에 css충돌이 생기기 쉽다.
- 서드파티 css를 사용하는 경우 
### 2. 스타일 상속에 의한 중복 문제
- 의도치않은 상속으로 사이드이펙트가 생기기 쉽다.

### 3. !important 문제

### 4. 코드 최적화 문제
1. 미사용 Class를 구분하기 어려워서 지울 수 없다.
2. 코드 재활용성이 떨어진다. 
3. 코드 재활용성을 고려하다보면 class가 많아진다.

### 5. 자바스크립트와 변수를 공유할 수 없는 문제
1. 자바크립트와 공유가 가능하면 조건부 스타일링이 수월해진다.  
2. 특정 색상값을 반복해서 사용한다면? (Sass에서 해결.)

### 6. 격리하여 관리하기 어려운 문제


## Css in js의 단점

1. 페이지 로드 시 자바스크립트를 분석하여 CSS 생성
- CSS 생성 오버헤드 - 규모가 클수록 영향
2. 렌더링 되는 시점에 스타일 코드가 추가됨
- CSS 파일을 캐시 할 수 없음 (파일 자체가 없음)
- Head영역이 아닌 Body영역에서 렌더링 됨 -> 스타일 없는 컴포넌트가 렌더링 되고 스타일이 뒤늦게 적용됨 (안 이쁨) -> SSR 설정으로 해결 가능



## Sass의 한계
Sass나 Less를 이용한 CSS 구조 설계와 같은 방식들이 유용하기는 하지만 조건부 스타일링의 방법 등 여전히 제한적인 문제가 있었습니다.  
그러나 Styled-Components 라이브러리는 위의 문제들을 해결할 수 있는 방법을 제시하고 있습니다.


1. 정해진 가이드가 없으면 구조가 복잡해진다.
2. CSS 클래스 명에 대한 고민은 여전하다.
3. 여전히 CSS 클래스로 조건부 스타일링을 하고 있다.

### 장점
- 자바스크립트와 css를 조합하여 사용할 수 있다.
- CSS 작업 시 SASS, LESS 혹은 Webpack을 이용한 구조화 작업에서 시간을 엄청나게 소비한 적이 있을 때
- CSS 파일 새로 만들고, 클래스명 만들고, 컴포넌트에서 CSS 파일을 왔다 갔다 하면서 시간을 소비한 적이 있을 때
- Sass를 좋아하고 Nesting, variable, Mixin을 사용하고 싶을 때

1. Class를 생성할 필요없다.
    - Class 이름 중복이나 오타 가능성에서 벗어난다.
2. css가 js에 통합되어 유지보수가 편리하다.
    

## Styled Component의 장점

### 1. 컴포넌트
- 컴포넌트별로 스타일을 분리해서 관리
- 클래스 이름을 자동으로 생성하고 중복 문제가 해결됨
### 2. CSS 코드 최적화
- 페이지에서 사용하는 컴포넌트의 스타일만 사용
- 불필요한 스타일은 제거
### 3. 자바스크립트 사용
- CSS를 코딩할 수 있음
- 변수나 함수를 만들고 자바스크립트 코드와 상수를 공유할 수 있음
- 조건부 스타일링이 수월해진다.
### 4. 테스트 코드 작성 가능
### 5. Vendor prefix
- moz, -webkit같은 벤더 프리픽스를 자동으로 붙여준다.




## Ref
- [Css-In-Js를 선택하는 이유](https://d0gf00t.tistory.com/22)
- [styled-components 소개](https://blog.nerdfactory.ai/2019/10/25/react-styled-components.html)
- [styled-component를 쓰는 이유](https://analogcoding.tistory.com/181)
- [What is styled-components ?](https://medium.com/@lee.ellen0814/styled-components-b90710b05e22)
- [2019 기술리뷰](https://subicura.com/2020/01/07/2019-dev-summary.html)