# Single-Page Application vs Multi-Page Application


## Intro

어떤 애플리케이션에 어떤 모델이 적합할까요?   
컨텐트를 기준으로 구분하는 방법을 제안합니다. 
모델을 정하기 앞서 이런 질문을 해볼 필요가 있습니다.  

    어떤 컨텐츠를 다루고 사용자에게 어떻게 보여지길 원합니까?

이제부터 SPA와 MPA의 특징을 알아보겠습니다.

## 1.Single-Page Application
말 그대로 단일 페이지에서 동작하는 애플리케니션 입니다.  
자바스크립트를 사용하여 컨텐츠를 로드하기 때문에 자바스크립트에 의존적입니다.
SPA는 마크업과 데이터를 각각 요청후 브라우저에서 페이지를 렌더링하기 때문에 서버에서 렌더링 로직을 작성할 필요가 없습니다(SSR 제외...).  
이 점은 클라이언트와 서버에 독립성을 부여하여 서버로직의 재홀용성을 높힙니다  
SPA 서비스에는  Slack, FaceBook, TWitter, GitHub, Gmail, Google Maps등이 있습니다.


### 사용자 경험.
리소스를 초기 로딩시 한번만 다운받기 때문에 MPA에서 페이지 이동시 리소스를 다운으로 인한 트래픽이 발생하지 않습니다.  
이 점으로 사용자에게 쾌적한 사용감을 제공하여 데스크탑 앱이나 모바일 앱을 사용하는 느낌을 줄 수 있습니다.

### 재활용성
렌더링 로직을 프론트에서 전담함으로서 서버로직으로부터 독립적입니다.  
프론트와 의존도를 낮춘 백엔드 서버의 로직은 재활용성이 높아집니다.

### 디버깅
디버깅하기 쉽다 네트워크 동작을 쉽게 모니터링 가능합니다.   

### 오프라인 사용 
앱이 한가지 요청만 보내고 모든 데이터를 저장합니다. 
이 점은 오프라인에도 해당페이지를 사용할 수 있는 환경을 제공합니다.

### 생산성
준비된 라이브러리와 프레임워크로 인해 빠른 개발이 가능하며 백엔드와 구분되어있어 지장을 주지 않는다.

### 자바스크립트 의존성
SPA를 구현하기 위해선 프론트엔드 라이브러리나 프레임워크를 사용하는 것이 일반적입니다.  
이에따라 자바스크립트에 대한 의존성이 높아지고 프론트 로직의 복잡도가 증가합니다.

### 초기 로딩속도
프레임워크와 리소스를 로딩해야 하기 때문에 초기 로딩이 상대적으로 느립니다.  
이 문제를 해결하기 위해 lazy loading과 분할로딩 기법을 사용합니다.

### 보안.
#### 1. 핵심로직을 자바스크립트로 구현됩니다.  
기존 웹에서는 비지니스 로직을 서버에서 수행하고 최종 결과를  전달했는데
SPA에서는 비지니스 로직을 클라이언트 단에서 수행하기 때문에 핵심로직이 노출될 수 있습니다.
이를 위해 핵심 로직을 서버에서 수행하도록 하고 유효성 검증을 양측에서 모두 수행해야하며 
클라이언트단에서 핵심로직 최소화하는 것이 중요합니다.

#### 2. 크로스 사이이트 스크립팅으로 인한 공격에 취약합니다.
기존 애플리케이션에 비해 SPA의 보안이 덜 업격하다. 크로스 사이트 스크립팅(Cross Site Scripting, XSS)를 이용하여 클라이언트측 스크립트를 웹 애플리케이션에 주입하는 공격이 가능하다.

### SEO(검색엔진 최적화)
필요한 정보만 비동기적으로 받아온 후 정보를 변경하는 방법으로 동작하기 때문에 크롤러가 데이터를 수집하기 어렵습니다.  
이 점은 SPA의 고질적 단점이며 이를 해결하기 위해 prerender.io같은 상용솔루션을 이용하거나, 서버사이드 렌더링(SSR)을 통해 검색엔진 최적화를 지원합니다


### 브라우저 지원
SPA 구현시 프레임워크나 라이브러리 사용이 불가피하며 이 도구들의 지원 브라우저 범위로 인해서 제한이 생깁니다.  
따라서 사용하는 라이브러리의 지원스펙과 애플리케이션의 지원 범위를 고려해야합니다.



### SPA 기획시  고려할점
#### 1. 데이터 관리는 어떻게 할것인가?  
고전 방식에서는 웹페이지가 로드 될 떄 서버에서 한번만 데이터를 보내거나 페이지가 로드 된 다음 API를 이용해서 데이터를 가지고 왔다. 
새로운 페이지가 로드되면 기존 데이터가 날아갔기 때문에 데이터 관리가 비교적 손쉬웠다.  

SPA에서는 페이지당 데이터관리가 아닌 Appliction당 데이터를 관리해야함으로 데이터의 양이 크고 복잡하다.  
이런 이유로 인해 데이터를 관리하는 별도의 시스템이 필요한데 대표적으로 react에서 redux를 사용하는 것을 예로 들 수 있다.

#### 2. 언제 새로운 데이터를 요청할까?  
고전 웹에서는 페이지가 로들 될때 DB의 데이터를 가져와 보여주고 사용자가 새로고침을 하면 데이터를 새로 요청했다.  

반면 SPA에서는 기본적으로 페이지 로드가 없고 DOM만 부분적으로 변경된다.  
그래서 새로운 데이터를 요청하는 시점을 스스로 정의해야한다.  

#### 3. 새로운 코드가 Deploy됐을때 처리
- 새로고침을 안해서 기존 코드를 사용하게 되는 상황에서 어떻게 처리를 할 것인가?

#### 4. 페이지 에러 핸들링.


<br><br>


## 2.Multi-Page Application
브라우저에서 변경사항이 있을 때 서버로 데이터를 전달하여 새로운 페이지를 렌더링 요청하고 데이터를 표시한다.  

https://www.nytimes.com/


### SEO
렌더링 로직을 서버에서 담당함으로 검색엔진 최적화가 손쉽습니다.

### 프론트와 백엔드 로직의 결합도.
프론트와 백엔드의 결합도가 높으며 코드가 엮여있어 서버와 클라이언트를 오가며 개발해야합니다.  
또 서버로직을 재활용하는데 제약이 생깁니다.


### 페이지 전환시 트래픽 증가.
페에지를 전환할 때마다 페이지에 필요한 리소스를 요청해야 하기때문에 전환속도 상대적으로 느립니다.





## 3.뭘 선택할까?
애플리케이션 배포전에 목적에 대해 생각해야합니다.  
쇼핑몰처럼 많은 컨텐츠를 배포하고 여러 카테고리가 필요하면 MPA가 낫습니다.  

따라서 컨텐츠에 따라서 SPA, MPA를 결정해야 하며 애플리케이션이 추구하는 방향과 모델이 사상이 일치하는지 생각해봐야합니다.  



## 4. 전망
앞으로 어떤 모델이 주목받을까요?  
꾸준히 SPA의 수요가 늘어나고 있습니다. 이 이유에는 스마트폰 보급에 따른 모바일 애플리케이션의 수요증가가 있다고 생각합니다.  
모바일 환경에서 접근가능하고 다룰 수 있는 컨텐츠에 대한 소비가 증가함에 따라 SPA를 채택하는 기업이 많아지는 것이죠.  

하지만 분명 구조적 장단점이 존재하기 떄문에 앞으로도 MPA의 수요는 꾸준할 것이라고 생각합니다.

## REF
- [SPA vs MPA](https://m.blog.naver.com/PostView.nhn?blogId=sthwin&logNo=221214109560&proxyReferer=https%3A%2F%2Fwww.google.com%2F)
- [SPA vs MPA - ENG](https://merehead.com/blog/single-page-application-vs-multi-page-application/)
- [SPA 단점에 대한 단상](https://m.mkexdev.net/374) 