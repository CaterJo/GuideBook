# Web Application


![](/resource/img/server/webApplication.png)

## 소개
웹 서버에서 처리할 수 없는 동적인 데이터 연산을 하여 웹서버에 연산 결과를 전달한다.  
쉽게 말해 웹에서 사용되는 애플리케이션을 메모리에 올려놓고 동적으로 사용할 수 있는 환경을 제공한다.  
*i.e.* JSP를 WAS에서 JAVA CLASS파일로 컴파일 후 html형태의 페이지로 클라이언트에게 전달.  
클라이언트가 동적 처리를 요하는 HTTP요청시 동적자원을 웹 애플리케이션으로 처리하는 일종의 미들웨어로 이해할 수 있다.  
여러 명의 사용자가 동일한 페이지 요청을 하여 여러 어플리케이션 프로그램을 처리할 때 오직 한개의 프로세스만을 할당하고 사용자의 요청을 쓰레드방식(servlet/jsp)으로 처리한다.  




## 웹 어플리케이션의 구동원리.
![](/resource/img/etc/web2.png)


1. 클라이언트가 브라우저에 도메인 주소를 입력한다.
2. 브라우저가 DNS 서버에서 웹 사이트의 실제주소를 찾는다.
3. 브라우저는 해당 서버에 웹사이트의 사본을 클라이언트에게 보내 달라는 HTTP요청 메세지를 해당 서버로 보낸다.(TCP/IP 연결)
4. 요청을 수신한 웹 서버는 요청 정보가 단순 정적 자원이면 웹서버에서 바로 클라이언트에게 전송한다.
5. 동적 자원(servlet, jsp)일 경우 웹 애플리케이션 서버에 요청을 넘긴다.
6. was에서는 다양한 로직이나 데이터베이스 연동을 통해 메세지를 처리한다
7. 처리 결과 메세지를 웹 서버로 보낸다.
8. 메세지를 받은 서버는 클라이언트의 요청을 승인하고 200 메세지를 전송한다.
9. 서버는 요청승인 메세지를 전송한뒤 데이터 패킷을 브라우저에 전소하기 시작한다.
10. 브라우저는 데이터 패킷을 조립하여 클라이언트에 출력한다.




### 1.역할

1. 웹 애플리케이션 실행환경 제공
	- 다양한 기능을 수행하는 컨테이너를 내장하여 처리한다.
	- CGI환경을 제공한다.
2. 데이터베이스 접속 기능 제공.
3. 여러 개의 트랜잭션 관리.


크게 웹 서버로서의 기능과 컨테이너의 기능으로 구성된다.


## 1.1 웹 서버
클라이언트의 메세지를 받고 화면에 표현하는 로직을 담당.
웹 서버가 직접 어플리케이션 프로그램을 처리하는 것이 아니다.  
was서버에게 처리를 넘겨주고 어플리케이션 서버가 어플리케이션 프로그램을 처리한다.  
여러 명의 사용자가 동일한 페이지를 요청하여 같은 어플리케이션 프로그램을 처리할 때 
오직 한 개의 프로세스만을 할당하고 사용자의 요청을 쓰레드 방식으로 처리하여 메모리를 절약 할 수 있다.   
따라서 동시에 여러 사용자에게 서비스 제공이 가능한다.



## 1.2 컨테이너
- 웹 환경에서 트랜잭션 처리 및 기존 시스템과 애플리케이션을 연동한다.

- 웹 컨테이너 (Sevlet/jsp)
	- 쓰레드 관리
- EJB 컨테이너
- 네이밍 서버
- 부하조절 기능(로드 밸런싱, load Balancing)
- 장애대첵(fail-Over)
- Clustering (분산 시스템)
	- 상황에 따라 클라이언트 요청을 was로 전달.
- DB 연결
	- DB Connection pool을 통한 DB connection 관리
	- 트랜잭션 관리
    



*실행코드 방식*  
- 코드 형식: 컴파일 된 실행 프로그램
- 실행 방식: 컴파일된 기계어 코드 직접실행
- 코드 변경: 소스코드를 다시 컴파일해야한다.
- 종     류: 대부분의 CGI프로그램
- 구     현:
	1. 웹 브라우저 요청전송
	2. 웹서버 요청받음
	3. 웹 어플리케이션 실행

*스크립트코드 방식*  
- 코드 형식: 컴파일되지 않은 스크립트 코드
- 실행 방식: 스크립트 코드를 해석한 뒤 실행
- 코드 변경: 스크립트 코드만 고치면 된다.
- 종     류: JSP, ASP, PHP
- 구     현: 
	1. 웹브라우저 요청 전송
	2. 웹 서버 요청을 받음
	3. 스크립트 코드 번역
	4. 번역된 코드 실행
	5. 번역이 최초에 한번만 실행되기 때문에 속도가 빠르다.



## WAS 제품군 비교

1. WebLogic(웹로직)
	- 오라클에서 개발한 크로스 플랫폼 Java EE 애플리케이션 서버
	- 웹 기반 관리자 콘솔 제공( JMS, 데이터 소스 및 보안 설정 등)
	- JMS 클러스터링
	- 안정성
	- 대기업에서 사용함

2. Jboss
	- Java EE기반 응용프로그램 서버
	- Java EE도 구현가능
	- 크로스 플랫폼 서버

3. Jeus
	- 티맥스 소프트 제작
	- 공공시장 기반으로 영역 확대


    
## Web Application Container
was에는 각각의 web Application을 처리하기 위한 container가 있다.

**web Container**  
웹 컨테이너는 서블릿과 웹 서버가 서로 통신할 수 있는 손쉬운 방법을 제공하며 서블릿의 라이프 사이클을 관리하고 요청이 들어올때 마다쓰레드에 대한 멀티쓰레딩을 지원하며 보안관리, jsp를 지원한다.

**EJB Container**  
EJB컨테이너는 Enterprise JavaBeans에 대한 실행환경을 제공한다.



##  JSP 동작 원리
1) 클라이언트(웹브라우저) 요청
2) 웹 서버는 요청 페이지를 판단한다.
 	-html인지 jsp인지 확인해서 jsp인경우 was에 처리를 요청한다.
3) was서버에서 다양한 로직이나 데이터베이스와 연동해서 완성된 결과물출력
4) 웹 서버는 완성된 결과물을 클라이언트에게 응답